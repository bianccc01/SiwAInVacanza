<!DOCTYPE html>
<html>
   <head>
      <title >
         SiwAInVacanza - Destinazione
      </title>
      <link rel="stylesheet" href="/css/stile.css" />
   </head>
   <body>
      <header>
         <a class = "home" href="/"> Home </a>
         <div th:if="${#request.userPrincipal}">
            <span th:text="'Bentornato ' + ${#request.userPrincipal.principal.username}"></span>
            <span href="/authenticated/userDetails">>Vai al tuo account </span>
            <a href="/logout">Logout</a>
         </div>
         <div th:unless="${#request.userPrincipal}">
            <a href="/login">Login</a>
         </div>
      </header>
      <div class = "logo"><img src="/images/SiwVLogo.png" width="20%" /></div>
        <h1 th:text="${destinazione.nome}">Ibiza</h1>
      <div class = "boxImage"> 
        <img th:if="${image == null}" src="/images/SiwVLogo.png" />
		<img th:if="${image != null}" th:src="@{'data:image/png;base64,' + ${image.base64Image}}"/>

      </div>
      <div class = "boxImageMini">
         <ul>
            <li th:each="i : ${images}">
               <div class = "minibox">
                  <a th:href="@{'/guest/destinazione' + '/' + ${destinazione.id} + '/' + ${i.id}}">
					<img th:href="@{'/guest/destinazione' + '/' + ${destinazione.id} + '/' + ${i.id}}" 
                  th:src="@{'data:image/png;base64,' + ${i.base64Image}}"/>
                  </a>
               </div>
            </li>
         </ul>
      </div>
      
      <a class="prenota" th:href="@{'/authenticated/formNewPrenotazione/' + ${destinazione.id}}">Effettua la prenotazione</a>

      <div class = "boxRecensioni" th:if="${#request.userPrincipal}" >
		  <div class ="recensione" th:if="${recUtente}!=null">
            <span id="titolo" th:text="${recUtente.utente.getNome()}"> </span>
      		<p th:text="${recUtente.titolo} + ${recUtente.voto}"> </p>
			<p th:if="${recUtente.testo!=null}" th:text="${recUtente.testo}"> </p>
			<a class="conferma" th:href="@{'/authenticated/rimuoviRecensione/' + ${recUtente.id}}"><button type="button">Rimuovi</button></a>
         </div>
         <div class ="recensione" th:unless="${recUtente}!=null">
			<a class="conferma" th:href="@{'/authenticated/formNewRecensione/' + ${destinazione.id}}"><button type="button">Aggiungi recensione</button></a>
         </div>
         <div class ="recensione" th:if="${recensioniNotUtente!=null || !recensioniNotUtente.isEmpty() and #lists.size(recensioniNotUtente)}==1">
            <span id="titolo" th:text="${recensioniNotUtente.utente.getNome()}"> </span>
      		<p th:text="${recensioniNotUtente.titolo} + ${recensioniNotUtente.voto}"> </p>
			<p th:if="${recensioniNotUtente.testo!=null}" th:text="${recensioniNotUtente.testo}"> </p>
         </div>
         <div class ="recensione" th:if="${recensioniNotUtente!=null || !recensioniNotUtente.isEmpty() and #lists.size(recensioniNotUtente)}==2" 
         th:each="recensione : ${recensioniNotUtente}">
            <span id="titolo" th:text="${recensione.utente.getNome()}"> </span>
      		<p th:text="${recensione.titolo} + ${recensione.voto}"> </p>
			<p th:if="${recensione.testo!=null}" th:text="${recensione.testo}"> </p>
         </div>
		 <div class ="recensione" th:if="${#lists.size(recensioniNotUtente)}>2">
		 	<span th:href="@{'/guest/recensioni/' + ${destinazione.id}}">
			 Visualizza altre recensioni </span>
		 </div>
      </div> 
      <div class = "boxRecensioni" th:unless="${#request.userPrincipal}" >
		  
      </div>
      
         
      
      
      
   </body>
</html>